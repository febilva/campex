var doc = new jsPDF();
var imgData ='data:image/jpeg;base64,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'
doc.addImage(imgData, 'JPEG', 20, 3, 30, 28);



doc.setProperties({
    title: 'MAMPAD COLLEGE PROVISIONAL HALLTICKET',
    subject: 'Online Hallticket',     
    author: 'Mentor Performance Rating',
    keywords: 'mes, mampad, college, examination, hallticket, mentor, campex',
    creator: 'Campex'
});

doc.setFont("times");
doc.setFontType("bold");

doc.setFontSize(12);
doc.text(64, 15, 'MES MAMPAD COLLEGE (Autonomous)');

doc.setFontSize(15);
doc.text(65, 22, 'PROVISIONAL HALL TICKET');

doc.setFontSize(13);
var examination_name = '<%= @exam_registration.examination.name %>';
doc.text(50, 28, examination_name);

doc.setFontSize(20);
doc.setFontType("bold");
doc.text(160, 10, '<%= @exam_registration.register_no %>');

/* -------------------------- Candidate Info Table Begins --------------------------------- */

var table_base_x = 20;
var table_base_y = 30;
var table_width = 170;
var table_height = 20;
var table_max_x = table_base_x + table_width;
var table_max_y = table_base_y + table_height;

doc.setLineWidth(0.1);
doc.rect(table_base_x, table_base_y, table_width, table_height); // rectangle enclosing table
doc.line(table_base_x + 30, table_base_y, table_base_x + 30, table_max_y); // vertical line

doc.setFontSize(8);

doc.setFontType("normal");
doc.line(table_base_x, table_base_y + 5, table_max_x, table_base_y + 5); // horizontal line
doc.text(table_base_x + 2, table_base_y + 4, 'Name of candidate');
doc.setFontType("bold");
doc.text(table_base_x + 35, table_base_y + 4, '<%= @exam_registration.student.name %>');

doc.setFontType("normal");
doc.line(table_base_x, table_base_y + 10, table_max_x, table_base_y + 10); // horizontal line
doc.text(table_base_x + 2, table_base_y + 9, 'Register No');
doc.setFontType("bold");
doc.text(table_base_x + 35, table_base_y + 9, 
  '<%= @exam_registration.register_no %>');

doc.setFontType("normal");
doc.line(table_base_x, table_base_y + 15, table_max_x, table_base_y + 15); // horizontal line
doc.text(table_base_x + 2, table_base_y + 14, 'Date of birth');
doc.text(table_base_x + 35, table_base_y + 14, '<%= @exam_registration.student.dob %>');

doc.line(table_base_x, table_base_y + 20, table_max_x, table_base_y + 20); // horizontal line
doc.text(table_base_x + 2, table_base_y + 19, 'Centre of Examination');
doc.text(table_base_x + 35, table_base_y + 19, 'M.E.S. MAMPAD COLLEGE');

/* -------------------------- Candidate Info Table Ends --------------------------------- */

doc.setFontSize(10);
doc.text(table_base_x + 50, 58, 'Details of Papers for which the Candidate is appearing');

/* -------------------------- Paper Info Table Begins --------------------------------- */
<% @papers = @exam_registration.papers.reverse %>

var table_base_x = 20;
var table_base_y = 60;
var table_width = 170;
var table_height = <%= @papers.count + 1 %> * 5;
var table_max_x = table_base_x + table_width;
var table_max_y = table_base_y + table_height;

doc.setLineWidth(0.1);
doc.rect(table_base_x, table_base_y, table_width, table_height); // rectangle enclosing table
doc.line(table_base_x + 30, table_base_y, table_base_x + 30, table_max_y); // vertical line
doc.line(table_base_x + 130, table_base_y, table_base_x + 130, table_max_y); // vertical line

doc.setFontSize(8);
doc.setFontType("bold");
doc.line(table_base_x, table_base_y + 5, table_max_x, table_base_y + 5); // horizontal line for headings
doc.text(table_base_x + 2, table_base_y + 3.5, 'Paper Code');
doc.text(table_base_x + 35, table_base_y + 3.5, 'Paper Name');
doc.text(table_base_x + 135, table_base_y + 3.5, 'Signature of Invigilator');

doc.setFontType("normal");
<% @papers.each_with_index do |paper, i| %>
  doc.line(table_base_x, table_base_y + ((<%= i %> + 2) * 5), table_max_x, 
    table_base_y + ((<%= i %> + 2) * 5)); // horizontal line
  // Paper Details
  doc.text(table_base_x + 2, table_base_y + ((<%= i %> + 2) * 5) - 1, '<%= paper.code %>');
  doc.text(table_base_x + 35, table_base_y + ((<%= i %> + 2) * 5) - 1, '<%= paper.name %>');
<% end %>

/* -------------------------- Paper Info Table Ends --------------------------------- */

/* -------------------------- Identification Block Begins --------------------------------- */

var block_base_x = 20;
var block_base_y = table_max_y + 30;

doc.rect(table_base_x, block_base_y, 28, 34); // rectangle enclosing photo

var getImageFromUrl = function(url, callback) {
  var img = new Image();

  img.crossOrigin = "Anonymous";

  img.onError = function() {
    alert('Cannot load image.');
  };

  img.onload = function() {
    callback(img);
  };

  img.src = url;
}

var createPDF = function(imgData) {
  doc.addImage(imgData, block_base_x, block_base_y, 28, 34);

  doc.setFontSize(8);
  doc.text(block_base_x + 40, block_base_y + 5, "Identifying Officer's");
  for(var i = block_base_x + 70; i < table_max_x; ++i)
    doc.text(i, block_base_y + 5, ".");
  doc.text(block_base_x + 40, block_base_y + 9, "Name, Designation and");
  for(var i = block_base_x + 70; i < table_max_x; ++i)
    doc.text(i, block_base_y + 9, ".");
  doc.text(block_base_x + 40, block_base_y + 13, "Address");
  for(var i = block_base_x + 70; i < table_max_x / 2 + 35; ++i)
    doc.text(i, block_base_y + 13, ".");
  doc.setFontSize(7);
  doc.text(block_base_x + 40, block_base_y + 20, "(To be attested by a Member of Teaching staff of the College/Dept./Centre not below the rank of a lecturer)");

  doc.setFontSize(8);
  doc.text(block_base_x, block_base_y + 38, "Signature of Identifying Officer with Seal");
  doc.text(block_base_x + 70, block_base_y + 38, "Signature of the Candidate");
  for(var i = 0, base_val = block_base_x + 102; i < 50; ++i)
    doc.text(base_val + i, block_base_y + 38, ".");

  doc.text(block_base_x, block_base_y + 42, "(To be signed on the Photograph)");
  doc.text(block_base_x + 70, block_base_y + 42, "(To be signed in the presence of Identifying Officer)");

  doc.text(block_base_x, block_base_y + 50, "(College/Dept./Centre Seal)");

  doc.text(block_base_x, block_base_y + 64, "MES MAMPAD COLLEGE");
  doc.text(block_base_x, block_base_y + 68, "676 542");

  doc.setFontSize(10);
  doc.setFontType("bold");
  doc.text(block_base_x + 125, block_base_y + 64, "Controller of Examinations");

  doc.setFontType("bold");
  doc.text(block_base_x + 5, block_base_y + 100, 
    "*** COMMUNICATION DEVICES ARE STRICTLY PROHIBITED INSIDE EXAMINATION HALL ***");

  doc.save("hallticket.pdf");
  doc.output('dataurlnewwindow');     //opens the data uri in new window
}

getImageFromUrl('<%= @exam_registration.student.dp.passport.url %>', createPDF);

/* -------------------------- Identification Block Ends ----------------------------------- */